<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NULI Avionics Flight Software: AprsTransmitter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NULI Avionics Flight Software
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classAprsTransmitter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AprsTransmitter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Turns binary data into sin waves, output-ed on the DAC.  
 <a href="classAprsTransmitter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="AprsTransmitter_8h_source.html">AprsTransmitter.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for AprsTransmitter:</div>
<div class="dyncontent">
<div class="center"><img src="classAprsTransmitter__coll__graph.png" border="0" usemap="#aAprsTransmitter_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2008e02d271fa6e804ef354fa5a5ed89"><td class="memItemLeft" align="right" valign="top"><a id="a2008e02d271fa6e804ef354fa5a5ed89" name="a2008e02d271fa6e804ef354fa5a5ed89"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>configure</b> ()</td></tr>
<tr class="memdesc:a2008e02d271fa6e804ef354fa5a5ed89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the hardware timers needed for modulating the signal accurately. Must be called only once, before any other methods are called. <br /></td></tr>
<tr class="separator:a2008e02d271fa6e804ef354fa5a5ed89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4dd4622fad3a638bfaad22854798db"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAprsTransmitter.html#a2e4dd4622fad3a638bfaad22854798db">send</a> (const uint8_t *data, int32_t length)</td></tr>
<tr class="memdesc:a2e4dd4622fad3a638bfaad22854798db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmits binary data through the DAC.  <br /></td></tr>
<tr class="separator:a2e4dd4622fad3a638bfaad22854798db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96c7703a8f1766c55020a1cc357c662e"><td class="memItemLeft" align="right" valign="top"><a id="a96c7703a8f1766c55020a1cc357c662e" name="a96c7703a8f1766c55020a1cc357c662e"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>beginTransmission</b> ()</td></tr>
<tr class="memdesc:a96c7703a8f1766c55020a1cc357c662e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begins a transition of the last data sent. <br /></td></tr>
<tr class="separator:a96c7703a8f1766c55020a1cc357c662e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a01cb277f95d778928a0b422c395e6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAprsTransmitter.html#a76a01cb277f95d778928a0b422c395e6">isCurrentlyTransmitting</a> ()</td></tr>
<tr class="separator:a76a01cb277f95d778928a0b422c395e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ad3742d1c3d24b2300f515617bf7ef338"><td class="memItemLeft" align="right" valign="top"><a id="ad3742d1c3d24b2300f515617bf7ef338" name="ad3742d1c3d24b2300f515617bf7ef338"></a>
static constexpr uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>BOD_RATE</b> = 1200</td></tr>
<tr class="memdesc:ad3742d1c3d24b2300f515617bf7ef338"><td class="mdescLeft">&#160;</td><td class="mdescRight">APRS bod rate in bits/second. <br /></td></tr>
<tr class="separator:ad3742d1c3d24b2300f515617bf7ef338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f6a73f10a751297fa0be8362908bf7"><td class="memItemLeft" align="right" valign="top"><a id="ac3f6a73f10a751297fa0be8362908bf7" name="ac3f6a73f10a751297fa0be8362908bf7"></a>
static constexpr uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>SAMPLE_FREQUENCY</b> = 240000</td></tr>
<tr class="memdesc:ac3f6a73f10a751297fa0be8362908bf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample frequency of the sin tables in samples/second. <br /></td></tr>
<tr class="separator:ac3f6a73f10a751297fa0be8362908bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4011c0bca8ef9398ad2d11e0a07fd9ca"><td class="memItemLeft" align="right" valign="top"><a id="a4011c0bca8ef9398ad2d11e0a07fd9ca" name="a4011c0bca8ef9398ad2d11e0a07fd9ca"></a>
static constexpr uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>MAXIMUM_BITS</b> = 1000</td></tr>
<tr class="memdesc:a4011c0bca8ef9398ad2d11e0a07fd9ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum message length in bits. <br /></td></tr>
<tr class="separator:a4011c0bca8ef9398ad2d11e0a07fd9ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a6e9265ef7bb2c1cf1f7371ba9bd6c"><td class="memItemLeft" align="right" valign="top"><a id="a36a6e9265ef7bb2c1cf1f7371ba9bd6c" name="a36a6e9265ef7bb2c1cf1f7371ba9bd6c"></a>
static volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_transmitActive</b> = false</td></tr>
<tr class="memdesc:a36a6e9265ef7bb2c1cf1f7371ba9bd6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tracks if the IRS is active. <br /></td></tr>
<tr class="separator:a36a6e9265ef7bb2c1cf1f7371ba9bd6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb71daae27e9a72bca9b594d9bf2728"><td class="memItemLeft" align="right" valign="top"><a id="a2eb71daae27e9a72bca9b594d9bf2728" name="a2eb71daae27e9a72bca9b594d9bf2728"></a>
static const uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><b>m_currentSample</b> = nullptr</td></tr>
<tr class="memdesc:a2eb71daae27e9a72bca9b594d9bf2728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the currently active sin table (might not point at the start of the table) <br /></td></tr>
<tr class="separator:a2eb71daae27e9a72bca9b594d9bf2728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e3eba9ea71859fdb249a1be101d973"><td class="memItemLeft" align="right" valign="top"><a id="ac4e3eba9ea71859fdb249a1be101d973" name="ac4e3eba9ea71859fdb249a1be101d973"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_currentSampleSize</b> = 0</td></tr>
<tr class="memdesc:ac4e3eba9ea71859fdb249a1be101d973"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of the current sample (should always be SAMPLE_FREQUENCY / BOD_RATE) <br /></td></tr>
<tr class="separator:ac4e3eba9ea71859fdb249a1be101d973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76d55d881f736fdaa7c1b21a0521b1e"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classAprsTransmitter.html#ad76d55d881f736fdaa7c1b21a0521b1e">currentSampleValue</a> = 0</td></tr>
<tr class="separator:ad76d55d881f736fdaa7c1b21a0521b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469600acbd54642f0116f03a2da40274"><td class="memItemLeft" align="right" valign="top"><a id="a469600acbd54642f0116f03a2da40274" name="a469600acbd54642f0116f03a2da40274"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>sampleIndex</b> = 0</td></tr>
<tr class="memdesc:a469600acbd54642f0116f03a2da40274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index within the sin table. <br /></td></tr>
<tr class="separator:a469600acbd54642f0116f03a2da40274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fbad79c512b3da4fc777b17c5aa9d1"><td class="memItemLeft" align="right" valign="top"><a id="a76fbad79c512b3da4fc777b17c5aa9d1" name="a76fbad79c512b3da4fc777b17c5aa9d1"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>bitIndex</b> = 0</td></tr>
<tr class="memdesc:a76fbad79c512b3da4fc777b17c5aa9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Which bit we are currently sending. <br /></td></tr>
<tr class="separator:a76fbad79c512b3da4fc777b17c5aa9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d90156cae9015521882ce72c2aa5320"><td class="memItemLeft" align="right" valign="top"><a id="a0d90156cae9015521882ce72c2aa5320" name="a0d90156cae9015521882ce72c2aa5320"></a>
static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>m_transmissionBitWaveformsNum</b> = 0</td></tr>
<tr class="memdesc:a0d90156cae9015521882ce72c2aa5320"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many bits we have to send. <br /></td></tr>
<tr class="separator:a0d90156cae9015521882ce72c2aa5320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937953627c5b87cb17ac49d38a20259b"><td class="memItemLeft" align="right" valign="top"><a id="a937953627c5b87cb17ac49d38a20259b" name="a937953627c5b87cb17ac49d38a20259b"></a>
static <a class="el" href="structBitSinTable__s.html">BitSinTable_s</a>&#160;</td><td class="memItemRight" valign="bottom"><b>m_transmissionBitWaveforms</b> [<a class="el" href="classAprsTransmitter.html#a4011c0bca8ef9398ad2d11e0a07fd9ca">MAXIMUM_BITS</a>] = {}</td></tr>
<tr class="memdesc:a937953627c5b87cb17ac49d38a20259b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datastructure containing the sin table windows for every bit we will transmit. <br /></td></tr>
<tr class="separator:a937953627c5b87cb17ac49d38a20259b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Turns binary data into sin waves, output-ed on the DAC. </p>
<p>To modulate the signal, precomputed 1200 hz and 2200 hz sin tables were computed. 2200 represents a one and 1200 represents a zero. To provide a smooth transition between the two frequency's, you must start the next frequency at the same value and direction as the current one. This class handles computing where to start in each sin table for each bit, and then uses timers/interrupts to accurately modulate the DAC/ </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a76a01cb277f95d778928a0b422c395e6" name="a76a01cb277f95d778928a0b422c395e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a01cb277f95d778928a0b422c395e6">&#9670;&#160;</a></span>isCurrentlyTransmitting()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool AprsTransmitter::isCurrentlyTransmitting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns if the signal modulation is active </p><dl class="section return"><dt>Returns</dt><dd>if the signal modulation is active </dd></dl>

</div>
</div>
<a id="a2e4dd4622fad3a638bfaad22854798db" name="a2e4dd4622fad3a638bfaad22854798db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4dd4622fad3a638bfaad22854798db">&#9670;&#160;</a></span>send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AprsTransmitter::send </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmits binary data through the DAC. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Binary data to transmit </td></tr>
    <tr><td class="paramname">length</td><td>How many bytes to transmit </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad76d55d881f736fdaa7c1b21a0521b1e" name="ad76d55d881f736fdaa7c1b21a0521b1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad76d55d881f736fdaa7c1b21a0521b1e">&#9670;&#160;</a></span>currentSampleValue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t AprsTransmitter::currentSampleValue = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>is this needed to be a member? Can probably be local or deleted </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>nuli_avionics_flight_software/platformio_nuli_avionics_flight_software/src/drivers/samd21/<a class="el" href="AprsTransmitter_8h_source.html">AprsTransmitter.h</a></li>
<li>nuli_avionics_flight_software/platformio_nuli_avionics_flight_software/src/drivers/samd21/AprsTransmitter.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
