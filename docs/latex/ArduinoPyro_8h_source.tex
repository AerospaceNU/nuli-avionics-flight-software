\doxysection{Arduino\+Pyro.\+h}
\hypertarget{ArduinoPyro_8h_source}{}\label{ArduinoPyro_8h_source}\index{nuli-\/avionics-\/flight-\/software/platformio\_nuli\_avionics\_flight\_software/src/drivers/arduino/ArduinoPyro.h@{nuli-\/avionics-\/flight-\/software/platformio\_nuli\_avionics\_flight\_software/src/drivers/arduino/ArduinoPyro.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ PLATFORMIO\_NULI\_AVIONICS\_FLIGHT\_SOFTWARE\_ARDUINO\_PYRO\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ PLATFORMIO\_NULI\_AVIONICS\_FLIGHT\_SOFTWARE\_ARDUINO\_PYRO\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{Avionics_8h}{Avionics.h}}>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}util/Timer.h"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}../../core/generic\_hardware/GenericSensor.h"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}../../core/generic\_hardware/Pyro.h"{}}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{/**}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ *\ @class\ Pyro}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ *\ @brief\ Represents\ a\ pyro\ channel}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ *\ @details\ Ability\ to\ fire,\ reading\ continuity.\ This\ assumes\ the\ device\ is\ an\ arduino\ with\ a\ pin\ to\ read\ state\ and\ a\ pin\ to\ fireDrogue}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classArduinoPyro_a3c039851c15f5daa4ca4947ff1576908}{ArduinoPyro}}\ final\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classPyro}{Pyro}}\ \{}
\DoxyCodeLine{00016\ \textcolor{keyword}{public}:\textcolor{comment}{}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ \ \ \ \ *\ @brief\ Creates\ a\ pyro\ object}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ \ \ \ \ *\ @param\ firePin\ Digital\ pin\ to\ fireDrogue\ the\ charge}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ \ \ \ \ *\ @param\ continuityPin\ Pin\ to\ read\ in\ continuity}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ \ \ \ *\ @param\ continuityThreshold\ Analog\ threshold\ for\ determining\ continuity}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{classArduinoPyro_a3c039851c15f5daa4ca4947ff1576908}{ArduinoPyro}}(\textcolor{keyword}{const}\ uint8\_t\ firePin,\ \textcolor{keyword}{const}\ uint8\_t\ continuityPin,\ \textcolor{keyword}{const}\ int32\_t\ continuityThreshold)\ :}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ m\_firePin(firePin),\ m\_continuityPin(continuityPin),\ m\_continuityThreshold(continuityThreshold)\ \{\}}
\DoxyCodeLine{00025\ \textcolor{comment}{}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ \ \ \ \ *\ @brief\ Initializes\ the\ pyro}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ \ \ \ \ *\ @details\ Sets\ up\ the\ input/output\ pins}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classArduinoPyro_a8c5497be4ecc09d4e6db04b98e8ccfba}{setup}}(\mbox{\hyperlink{classDebugStream}{DebugStream}}\ *debugStream)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00031\ \textcolor{comment}{}}
\DoxyCodeLine{00032\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ \ \ \ \ *\ @brief\ Reads\ in\ the\ continuity\ state}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ \ *\ @details\ Can\ use\ either\ analog\ or\ digital\ input}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classArduinoPyro_a931790fc723bc130913f650e8e1451ad}{read}}()\ \textcolor{keyword}{override};\textcolor{comment}{}}
\DoxyCodeLine{00037\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ \ \ \ \ *\ @brief\ Returns\ if\ the\ channel\ has\ pyro\ continuity}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ \ \ \ \ *\ @return\ If\ there\ is\ continuity}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classArduinoPyro_acce294d94c9ece5e5efe3c1c9be2f474}{hasContinuity}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00042\ \textcolor{comment}{}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ \ \ \ \ *\ @brief\ Fires\ the\ pyro\ channel}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ \ \ \ \ *\ @details\ Writes\ the\ fireDrogue\ pin\ high}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classArduinoPyro_ab4fffa053b88ba80243feed213a32ca8}{fire}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keywordtype}{void}\ fireFor(uint32\_t\ timeMs)\ \textcolor{keyword}{override};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{comment}{}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ \ \ \ /**}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ \ \ \ \ *\ @brief\ Disables\ they\ pyro\ channel}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ \ \ \ \ *\ @details\ Writes\ the\ fireDrogue\ pin\ low}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ \ \ \ \ */}}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classArduinoPyro_a575fb26d0c937a3de5ba030e7b82ccb0}{disable}}()\ \textcolor{keyword}{override};}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keywordtype}{int}\ rawAdcValue()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classArduinoPyro_a7a6baae818669f6f7fd0eabb991681b4}{isFired}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{constexpr}\ int32\_t\ \mbox{\hyperlink{classArduinoPyro_ae01421f415453706eca68ac1f110a9d4}{USE\_DIGITAL\_CONTINUITY}}\ =\ -\/1;\ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{///<\ Flag\ value\ for\ the\ analog\ threshold\ to\ allow\ for\ continuity\ to\ be\ read\ digitally}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_isFired\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_hasContinuity\ =\ \textcolor{keyword}{false};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{///<\ Tracks\ if\ the\ pyro\ has\ continuity}}
\DoxyCodeLine{00069\ \ \ \ \ int32\_t\ m\_continuityValue\ =\ 0;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{///<\ Analog\ threshold\ for\ determining\ if\ a\ pin\ has\ continuity}}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t\ m\_firePin;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{///<\ Pin\ for\ firing\ the\ pyro}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{const}\ uint8\_t\ m\_continuityPin;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{///<\ Pin\ for\ reading\ pyro\ continuity}}
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{const}\ int32\_t\ m\_continuityThreshold;\ \ \ \ \ \ \ \ \textcolor{comment}{///<\ Analog\ threshold\ for\ determining\ if\ a\ pin\ has\ continuity}}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ \ \ \ \ \mbox{\hyperlink{classAlarm}{Alarm}}\ m\_timedFireAlarm;}
\DoxyCodeLine{00075\ \};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//PLATFORMIO\_NULI\_AVIONICS\_FLIGHT\_SOFTWARE\_ARDUINO\_PYRO\_H}}

\end{DoxyCode}
