\doxysection{Umeyama.\+h}
\hypertarget{Umeyama_8h_source}{}\label{Umeyama_8h_source}\index{nuli-\/avionics-\/flight-\/software/platformio\_nuli\_avionics\_flight\_software/include/Eigen/src/Geometry/Umeyama.h@{nuli-\/avionics-\/flight-\/software/platformio\_nuli\_avionics\_flight\_software/include/Eigen/src/Geometry/Umeyama.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ This\ file\ is\ part\ of\ Eigen,\ a\ lightweight\ C++\ template\ library}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ for\ linear\ algebra.}}
\DoxyCodeLine{00003\ \textcolor{comment}{//}}
\DoxyCodeLine{00004\ \textcolor{comment}{//\ Copyright\ (C)\ 2009\ Hauke\ Heibel\ <hauke.heibel@gmail.com>}}
\DoxyCodeLine{00005\ \textcolor{comment}{//}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ This\ Source\ Code\ Form\ is\ subject\ to\ the\ terms\ of\ the\ Mozilla}}
\DoxyCodeLine{00007\ \textcolor{comment}{//\ Public\ License\ v.\ 2.0.\ If\ a\ copy\ of\ the\ MPL\ was\ not\ distributed}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ with\ this\ file,\ You\ can\ obtain\ one\ at\ http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_UMEYAMA\_H}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#define\ EIGEN\_UMEYAMA\_H}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{comment}{//\ This\ file\ requires\ the\ user\ to\ include\ }}
\DoxyCodeLine{00014\ \textcolor{comment}{//\ *\ Eigen/Core}}
\DoxyCodeLine{00015\ \textcolor{comment}{//\ *\ Eigen/LU\ }}
\DoxyCodeLine{00016\ \textcolor{comment}{//\ *\ Eigen/SVD}}
\DoxyCodeLine{00017\ \textcolor{comment}{//\ *\ Eigen/Array}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceEigen}{Eigen}}\ \{\ }
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#ifndef\ EIGEN\_PARSED\_BY\_DOXYGEN}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{comment}{//\ These\ helpers\ are\ required\ since\ it\ allows\ to\ use\ mixed\ types\ as\ parameters}}
\DoxyCodeLine{00024\ \textcolor{comment}{//\ for\ the\ Umeyama.\ The\ problem\ with\ mixed\ parameters\ is\ that\ the\ return\ type}}
\DoxyCodeLine{00025\ \textcolor{comment}{//\ cannot\ trivially\ be\ deduced\ when\ float\ and\ double\ types\ are\ mixed.}}
\DoxyCodeLine{00026\ \textcolor{keyword}{namespace\ }internal\ \{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \textcolor{comment}{//\ Compile\ time\ return\ type\ deduction\ for\ different\ MatrixBase\ types.}}
\DoxyCodeLine{00029\ \textcolor{comment}{//\ Different\ means\ here\ different\ alignment\ and\ parameters\ but\ the\ same\ underlying}}
\DoxyCodeLine{00030\ \textcolor{comment}{//\ real\ scalar\ type.}}
\DoxyCodeLine{00031\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ MatrixType,\ \textcolor{keyword}{typename}\ OtherMatrixType>}
\DoxyCodeLine{00032\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structEigen_1_1internal_1_1umeyama__transform__matrix__type}{umeyama\_transform\_matrix\_type}}}
\DoxyCodeLine{00033\ \{}
\DoxyCodeLine{00034\ \ \ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00035\ \ \ \ \ MinRowsAtCompileTime\ =\ EIGEN\_SIZE\_MIN\_PREFER\_DYNAMIC(MatrixType::RowsAtCompileTime,\ OtherMatrixType::RowsAtCompileTime),}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{comment}{//\ When\ possible\ we\ want\ to\ choose\ some\ small\ fixed\ size\ value\ since\ the\ result}}
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//\ is\ likely\ to\ fit\ on\ the\ stack.\ So\ here,\ EIGEN\_SIZE\_MIN\_PREFER\_DYNAMIC\ is\ not\ what\ we\ want.}}
\DoxyCodeLine{00039\ \ \ \ \ HomogeneousDimension\ =\ int(MinRowsAtCompileTime)\ ==\ \mbox{\hyperlink{namespaceEigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}}\ ?\ \mbox{\hyperlink{namespaceEigen_ad81fa7195215a0ce30017dfac309f0b2}{Dynamic}}\ :\ int(MinRowsAtCompileTime)+1}
\DoxyCodeLine{00040\ \ \ \};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1Matrix}{Matrix<typename\ traits<MatrixType>::Scalar}},}
\DoxyCodeLine{00043\ \ \ \ \ HomogeneousDimension,}
\DoxyCodeLine{00044\ \ \ \ \ HomogeneousDimension,}
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13ad0e7f67d40bcde3d41c12849b16ce6ea}{AutoAlign}}\ |\ (\mbox{\hyperlink{structEigen_1_1internal_1_1traits}{traits<MatrixType>::Flags}}\ \&\ \mbox{\hyperlink{group__flags_gae4f56c2a60bbe4bd2e44c5b19cbe8762}{RowMajorBit}}\ ?\ \mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a77c993a8d9f6efe5c1159fb2ab07dd4f}{RowMajor}}\ :\ \mbox{\hyperlink{group__enums_ggaacded1a18ae58b0f554751f6cdf9eb13a0103672ae41005ab03b4176c765afd62}{ColMajor}}),}
\DoxyCodeLine{00046\ \ \ \ \ HomogeneousDimension,}
\DoxyCodeLine{00047\ \ \ \ \ HomogeneousDimension}
\DoxyCodeLine{00048\ \ \ >\ type;}
\DoxyCodeLine{00049\ \};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00054\ \textcolor{comment}{}}
\DoxyCodeLine{00055\ \textcolor{comment}{/**}}
\DoxyCodeLine{00056\ \textcolor{comment}{*\ \(\backslash\)geometry\_module\ \(\backslash\)ingroup\ Geometry\_Module}}
\DoxyCodeLine{00057\ \textcolor{comment}{*}}
\DoxyCodeLine{00058\ \textcolor{comment}{*\ \(\backslash\)brief\ Returns\ the\ transformation\ between\ two\ point\ sets.}}
\DoxyCodeLine{00059\ \textcolor{comment}{*}}
\DoxyCodeLine{00060\ \textcolor{comment}{*\ The\ algorithm\ is\ based\ on:}}
\DoxyCodeLine{00061\ \textcolor{comment}{*\ "{}Least-\/squares\ estimation\ of\ transformation\ parameters\ between\ two\ point\ patterns"{},}}
\DoxyCodeLine{00062\ \textcolor{comment}{*\ Shinji\ Umeyama,\ PAMI\ 1991,\ DOI:\ 10.1109/34.88573}}
\DoxyCodeLine{00063\ \textcolor{comment}{*}}
\DoxyCodeLine{00064\ \textcolor{comment}{*\ It\ estimates\ parameters\ \(\backslash\)f\$\ c,\ \(\backslash\)mathbf\{R\},\ \(\backslash\)f\$\ and\ \(\backslash\)f\$\ \(\backslash\)mathbf\{t\}\ \(\backslash\)f\$\ such\ that}}
\DoxyCodeLine{00065\ \textcolor{comment}{*\ \(\backslash\)f\{align*\}}}
\DoxyCodeLine{00066\ \textcolor{comment}{*\ \ \ \(\backslash\)frac\{1\}\{n\}\ \(\backslash\)sum\_\{i=1\}\string^n\ \(\backslash\)vert\(\backslash\)vert\ y\_i\ -\/\ (c\(\backslash\)mathbf\{R\}x\_i\ +\ \(\backslash\)mathbf\{t\})\ \(\backslash\)vert\(\backslash\)vert\_2\string^2}}
\DoxyCodeLine{00067\ \textcolor{comment}{*\ \(\backslash\)f\}}}
\DoxyCodeLine{00068\ \textcolor{comment}{*\ is\ minimized.}}
\DoxyCodeLine{00069\ \textcolor{comment}{*}}
\DoxyCodeLine{00070\ \textcolor{comment}{*\ The\ algorithm\ is\ based\ on\ the\ analysis\ of\ the\ covariance\ matrix}}
\DoxyCodeLine{00071\ \textcolor{comment}{*\ \(\backslash\)f\$\ \(\backslash\)Sigma\_\{\(\backslash\)mathbf\{x\}\(\backslash\)mathbf\{y\}\}\ \(\backslash\)in\ \(\backslash\)mathbb\{R\}\string^\{d\ \(\backslash\)times\ d\}\ \(\backslash\)f\$}}
\DoxyCodeLine{00072\ \textcolor{comment}{*\ of\ the\ input\ point\ sets\ \(\backslash\)f\$\ \(\backslash\)mathbf\{x\}\ \(\backslash\)f\$\ and\ \(\backslash\)f\$\ \(\backslash\)mathbf\{y\}\ \(\backslash\)f\$\ where\ }}
\DoxyCodeLine{00073\ \textcolor{comment}{*\ \(\backslash\)f\$d\(\backslash\)f\$\ is\ corresponding\ to\ the\ dimension\ (which\ is\ typically\ small).}}
\DoxyCodeLine{00074\ \textcolor{comment}{*\ The\ analysis\ is\ involving\ the\ SVD\ having\ a\ complexity\ of\ \(\backslash\)f\$O(d\string^3)\(\backslash\)f\$}}
\DoxyCodeLine{00075\ \textcolor{comment}{*\ though\ the\ actual\ computational\ effort\ lies\ in\ the\ covariance}}
\DoxyCodeLine{00076\ \textcolor{comment}{*\ matrix\ computation\ which\ has\ an\ asymptotic\ lower\ bound\ of\ \(\backslash\)f\$O(dm)\(\backslash\)f\$\ when\ }}
\DoxyCodeLine{00077\ \textcolor{comment}{*\ the\ input\ point\ sets\ have\ dimension\ \(\backslash\)f\$d\ \(\backslash\)times\ m\(\backslash\)f\$.}}
\DoxyCodeLine{00078\ \textcolor{comment}{*}}
\DoxyCodeLine{00079\ \textcolor{comment}{*\ Currently\ the\ method\ is\ working\ only\ for\ floating\ point\ matrices.}}
\DoxyCodeLine{00080\ \textcolor{comment}{*}}
\DoxyCodeLine{00081\ \textcolor{comment}{*\ \(\backslash\)todo\ Should\ the\ return\ type\ of\ umeyama()\ become\ a\ Transform?}}
\DoxyCodeLine{00082\ \textcolor{comment}{*}}
\DoxyCodeLine{00083\ \textcolor{comment}{*\ \(\backslash\)param\ src\ Source\ points\ \(\backslash\)f\$\ \(\backslash\)mathbf\{x\}\ =\ \(\backslash\)left(\ x\_1,\ \(\backslash\)hdots,\ x\_n\ \(\backslash\)right)\ \(\backslash\)f\$.}}
\DoxyCodeLine{00084\ \textcolor{comment}{*\ \(\backslash\)param\ dst\ Destination\ points\ \(\backslash\)f\$\ \(\backslash\)mathbf\{y\}\ =\ \(\backslash\)left(\ y\_1,\ \(\backslash\)hdots,\ y\_n\ \(\backslash\)right)\ \(\backslash\)f\$.}}
\DoxyCodeLine{00085\ \textcolor{comment}{*\ \(\backslash\)param\ with\_scaling\ Sets\ \(\backslash\)f\$\ c=1\ \(\backslash\)f\$\ when\ <code>false</code>\ is\ passed.}}
\DoxyCodeLine{00086\ \textcolor{comment}{*\ \(\backslash\)return\ The\ homogeneous\ transformation\ }}
\DoxyCodeLine{00087\ \textcolor{comment}{*\ \(\backslash\)f\{align*\}}}
\DoxyCodeLine{00088\ \textcolor{comment}{*\ \ \ T\ =\ \(\backslash\)begin\{bmatrix\}\ c\(\backslash\)mathbf\{R\}\ \&\ \(\backslash\)mathbf\{t\}\ \(\backslash\)\(\backslash\)\ \(\backslash\)mathbf\{0\}\ \&\ 1\ \(\backslash\)end\{bmatrix\}}}
\DoxyCodeLine{00089\ \textcolor{comment}{*\ \(\backslash\)f\}}}
\DoxyCodeLine{00090\ \textcolor{comment}{*\ minimizing\ the\ residual\ above.\ This\ transformation\ is\ always\ returned\ as\ an\ }}
\DoxyCodeLine{00091\ \textcolor{comment}{*\ Eigen::Matrix.}}
\DoxyCodeLine{00092\ \textcolor{comment}{*/}}
\DoxyCodeLine{00093\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Derived,\ \textcolor{keyword}{typename}\ OtherDerived>}
\DoxyCodeLine{00094\ \textcolor{keyword}{typename}\ internal::umeyama\_transform\_matrix\_type<Derived,\ OtherDerived>::type}
\DoxyCodeLine{00095\ \mbox{\hyperlink{group__Geometry__Module_ga033d6550c1fc82e232f2b4c380c19a54}{umeyama}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1MatrixBase}{MatrixBase<Derived>}}\&\ src,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1MatrixBase}{MatrixBase<OtherDerived>}}\&\ dst,\ \textcolor{keywordtype}{bool}\ with\_scaling\ =\ \textcolor{keyword}{true})}
\DoxyCodeLine{00096\ \{}
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ internal::umeyama\_transform\_matrix\_type<Derived,\ OtherDerived>::type\ TransformationMatrixType;}
\DoxyCodeLine{00098\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<TransformationMatrixType>::Scalar}}\ \mbox{\hyperlink{classEigen_1_1Product}{Scalar}};}
\DoxyCodeLine{00099\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ NumTraits<Scalar>::Real\ RealScalar;}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ EIGEN\_STATIC\_ASSERT(!NumTraits<Scalar>::IsComplex,\ NUMERIC\_TYPE\_MUST\_BE\_REAL)}
\DoxyCodeLine{00102\ \ \ EIGEN\_STATIC\_ASSERT((\mbox{\hyperlink{structEigen_1_1internal_1_1is__same}{internal::is\_same}}<\mbox{\hyperlink{classEigen_1_1Product}{Scalar}},\ \textcolor{keyword}{typename}\ \mbox{\hyperlink{structEigen_1_1internal_1_1traits}{internal::traits<OtherDerived>::Scalar}}>::value),}
\DoxyCodeLine{00103\ \ \ \ \ YOU\_MIXED\_DIFFERENT\_NUMERIC\_TYPES\_\_YOU\_NEED\_TO\_USE\_THE\_CAST\_METHOD\_OF\_MATRIXBASE\_TO\_CAST\_NUMERIC\_TYPES\_EXPLICITLY)}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \textcolor{keyword}{enum}\ \{\ Dimension\ =\ EIGEN\_SIZE\_MIN\_PREFER\_DYNAMIC(Derived::RowsAtCompileTime,\ OtherDerived::RowsAtCompileTime)\ \};}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1Matrix}{Matrix<Scalar,\ Dimension,\ 1>}}\ VectorType;}
\DoxyCodeLine{00108\ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classEigen_1_1Matrix}{Matrix<Scalar,\ Dimension,\ Dimension>}}\ \mbox{\hyperlink{classEigen_1_1Transform}{MatrixType}};}
\DoxyCodeLine{00109\ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ internal::plain\_matrix\_type\_row\_major<Derived>::type\ RowMajorMatrixType;}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ m\ =\ src.rows();\ \textcolor{comment}{//\ dimension}}
\DoxyCodeLine{00112\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ n\ =\ src.cols();\ \textcolor{comment}{//\ number\ of\ measurements}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \textcolor{comment}{//\ required\ for\ demeaning\ ...}}
\DoxyCodeLine{00115\ \ \ \textcolor{keyword}{const}\ RealScalar\ one\_over\_n\ =\ RealScalar(1)\ /\ \textcolor{keyword}{static\_cast<}RealScalar\textcolor{keyword}{>}(n);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \textcolor{comment}{//\ computation\ of\ mean}}
\DoxyCodeLine{00118\ \ \ \textcolor{keyword}{const}\ VectorType\ src\_mean\ =\ src.\mbox{\hyperlink{classEigen_1_1DenseBase_af9662cd704ffc16c5b88c7b2d331576f}{rowwise}}().\mbox{\hyperlink{classEigen_1_1VectorwiseOp_a2005154bdb90789c0eb55343be9694c1}{sum}}()\ *\ one\_over\_n;}
\DoxyCodeLine{00119\ \ \ \textcolor{keyword}{const}\ VectorType\ dst\_mean\ =\ dst.\mbox{\hyperlink{classEigen_1_1DenseBase_af9662cd704ffc16c5b88c7b2d331576f}{rowwise}}().\mbox{\hyperlink{classEigen_1_1VectorwiseOp_a2005154bdb90789c0eb55343be9694c1}{sum}}()\ *\ one\_over\_n;}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \textcolor{comment}{//\ demeaning\ of\ src\ and\ dst\ points}}
\DoxyCodeLine{00122\ \ \ \textcolor{keyword}{const}\ RowMajorMatrixType\ src\_demean\ =\ src.\mbox{\hyperlink{classEigen_1_1DenseBase_a978724c07b70cb9b8fdef67a4de08788}{colwise}}()\ -\/\ src\_mean;}
\DoxyCodeLine{00123\ \ \ \textcolor{keyword}{const}\ RowMajorMatrixType\ dst\_demean\ =\ dst.\mbox{\hyperlink{classEigen_1_1DenseBase_a978724c07b70cb9b8fdef67a4de08788}{colwise}}()\ -\/\ dst\_mean;}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \textcolor{comment}{//\ Eq.\ (36)-\/(37)}}
\DoxyCodeLine{00126\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1Product}{Scalar}}\ src\_var\ =\ src\_demean.rowwise().squaredNorm().sum()\ *\ one\_over\_n;}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \textcolor{comment}{//\ Eq.\ (38)}}
\DoxyCodeLine{00129\ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1Transform}{MatrixType}}\ sigma\ =\ one\_over\_n\ *\ dst\_demean\ *\ src\_demean.transpose();}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \mbox{\hyperlink{classEigen_1_1JacobiSVD}{JacobiSVD<MatrixType>}}\ svd(sigma,\ \mbox{\hyperlink{group__enums_ggae3e239fb70022eb8747994cf5d68b4a9a9fa9302d510cee20c26311154937e23f}{ComputeFullU}}\ |\ \mbox{\hyperlink{group__enums_ggae3e239fb70022eb8747994cf5d68b4a9a36581f7c662f7def31efd500c284f930}{ComputeFullV}});}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \textcolor{comment}{//\ Initialize\ the\ resulting\ transformation\ with\ an\ identity\ matrix...}}
\DoxyCodeLine{00134\ \ \ TransformationMatrixType\ Rt\ =\ TransformationMatrixType::Identity(m+1,m+1);}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \textcolor{comment}{//\ Eq.\ (39)}}
\DoxyCodeLine{00137\ \ \ VectorType\ S\ =\ VectorType::Ones(m);}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \textcolor{keywordflow}{if}\ \ (\ svd.\mbox{\hyperlink{classEigen_1_1SVDBase_accbc8e3f9baab3a57a6eba8e4cc3ea27}{matrixU}}().determinant()\ *\ svd.\mbox{\hyperlink{classEigen_1_1SVDBase_af09f06357d7d7442f7ca7343713756fe}{matrixV}}().determinant()\ <\ 0\ )\ \{}
\DoxyCodeLine{00140\ \ \ \ \ \mbox{\hyperlink{namespaceEigen_a62e77e0933482dafde8fe197d9a2cfde}{Index}}\ tmp\ =\ m\ -\/\ 1;\ \ }
\DoxyCodeLine{00141\ \ \ \ \ S(tmp)\ =\ -\/1;}
\DoxyCodeLine{00142\ \ \ \}}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \textcolor{comment}{//\ Eq.\ (40)\ and\ (43)}}
\DoxyCodeLine{00145\ \ \ Rt.block(0,0,m,m).noalias()\ =\ svd.\mbox{\hyperlink{classEigen_1_1SVDBase_accbc8e3f9baab3a57a6eba8e4cc3ea27}{matrixU}}()\ *\ S.asDiagonal()\ *\ svd.\mbox{\hyperlink{classEigen_1_1SVDBase_af09f06357d7d7442f7ca7343713756fe}{matrixV}}().transpose();}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \textcolor{keywordflow}{if}\ (with\_scaling)}
\DoxyCodeLine{00148\ \ \ \{}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{comment}{//\ Eq.\ (42)}}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classEigen_1_1Product}{Scalar}}\ c\ =\ \mbox{\hyperlink{classEigen_1_1Product}{Scalar}}(1)/src\_var\ *\ svd.\mbox{\hyperlink{classEigen_1_1SVDBase_ac44c307a70731003003faf3a9bdf14f6}{singularValues}}().dot(S);}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{comment}{//\ Eq.\ (41)}}
\DoxyCodeLine{00153\ \ \ \ \ Rt.col(m).head(m)\ =\ dst\_mean;}
\DoxyCodeLine{00154\ \ \ \ \ Rt.col(m).head(m).noalias()\ -\/=\ c*Rt.topLeftCorner(m,m)*src\_mean;}
\DoxyCodeLine{00155\ \ \ \ \ Rt.block(0,0,m,m)\ *=\ c;}
\DoxyCodeLine{00156\ \ \ \}}
\DoxyCodeLine{00157\ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00158\ \ \ \{}
\DoxyCodeLine{00159\ \ \ \ \ Rt.col(m).head(m)\ =\ dst\_mean;}
\DoxyCodeLine{00160\ \ \ \ \ Rt.col(m).head(m).noalias()\ -\/=\ Rt.topLeftCorner(m,m)*src\_mean;}
\DoxyCodeLine{00161\ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \textcolor{keywordflow}{return}\ Rt;}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \}\ \textcolor{comment}{//\ end\ namespace\ Eigen}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ EIGEN\_UMEYAMA\_H}}

\end{DoxyCode}
